<header x-data="{ mobileMenuOpen: false }" @keydown.escape.window="mobileMenuOpen = false"
    class="bg-white shadow-md sticky top-0 z-40">
    <nav class="container mx-auto px-6 sm:px-8 flex justify-between items-center h-20">
        <a href="index.html" class="font-sans text-2xl font-bold text-primary-blue">Mas<span
                class="text-secondary-orange"> Freight</span></a>
        <ul class="hidden lg:flex items-center space-x-8">
            <!-- START: UPDATED MEGA MENU COMPONENT -->
            <li x-data="{ megaMenuOpen: false, activeTab: 'cargo' }" @keydown.escape.window="megaMenuOpen = false"
                @click.outside="megaMenuOpen = false" class="relative">

                <!-- Menu Trigger Button (remains click) -->
                <button type="button" @click="megaMenuOpen = !megaMenuOpen"
                    class="font-sans font-semibold text-primary-blue hover:text-secondary-orange flex items-center gap-1 transition-colors">
                    <span>Solutions</span> <i class="fas fa-chevron-down fa-xs transition-transform duration-200"
                        :class="{'rotate-180': megaMenuOpen}"></i>
                </button>

                <!-- Mega Menu Panel (THIS LINE IS CHANGED) -->
                <div x-show="megaMenuOpen" x-transition:enter="transition ease-out duration-200"
                    x-transition:enter-start="opacity-0 translate-y-2"
                    x-transition:enter-end="opacity-100 translate-y-0"
                    x-transition:leave="transition ease-in duration-150"
                    x-transition:leave-start="opacity-100 translate-y-0"
                    x-transition:leave-end="opacity-0 translate-y-2"
                    class="absolute left-1/2 -translate-x-1/2 top-full mt-3 w-screen max-w-4xl" x-cloak>

                    <div class="flex overflow-hidden rounded-lg shadow-xl ring-1 ring-black ring-opacity-5">

                        <!-- Sidebar for Categories -->
                        <div class="w-1/3 bg-light-grey p-4 space-y-2">
                            <button @mouseenter="activeTab = 'cargo'" @focus="activeTab = 'cargo'"
                                :class="{ 'bg-white text-secondary-orange shadow-sm': activeTab === 'cargo', 'hover:bg-gray-200 text-primary-blue': activeTab !== 'cargo' }"
                                class="w-full text-left font-sans font-semibold p-3 rounded-md transition-colors duration-150">
                                Cargo Types
                            </button>
                            <button @mouseenter="activeTab = 'industries'" @focus="activeTab = 'industries'"
                                :class="{ 'bg-white text-secondary-orange shadow-sm': activeTab === 'industries', 'hover:bg-gray-200 text-primary-blue': activeTab !== 'industries' }"
                                class="w-full text-left font-sans font-semibold p-3 rounded-md transition-colors duration-150">
                                Industries Served
                            </button>
                            <button @mouseenter="activeTab = 'destinations'" @focus="activeTab = 'destinations'"
                                :class="{ 'bg-white text-secondary-orange shadow-sm': activeTab === 'destinations', 'hover:bg-gray-200 text-primary-blue': activeTab !== 'destinations' }"
                                class="w-full text-left font-sans font-semibold p-3 rounded-md transition-colors duration-150">
                                Destination Countries
                            </button>
                        </div>

                        <!-- Content Area for Links -->
                        <div class="w-2/3 bg-white p-6">
                            <!-- Cargo Types Links -->
                            <div x-show="activeTab === 'cargo'" class="space-y-4">
                                <a href="/dedicated-hazchem-freight.html"
                                    class="group flex items-start gap-4 p-3 rounded-lg hover:bg-light-grey transition-colors">
                                    <i class="fas fa-exclamation-triangle fa-fw text-secondary-orange text-xl mt-1"></i>
                                    <div>
                                        <div
                                            class="font-sans font-semibold text-primary-blue group-hover:text-secondary-orange">
                                            Dedicated Hazchem Freight</div>
                                        <p class="text-sm text-gray-500">Compliant and secure transport for hazardous
                                            materials.</p>
                                    </div>
                                </a>
                                <a href="/general-cargo-ftl-freight.html"
                                    class="group flex items-start gap-4 p-3 rounded-lg hover:bg-light-grey transition-colors">
                                    <i class="fas fa-box-open fa-fw text-secondary-orange text-xl mt-1"></i>
                                    <div>
                                        <div
                                            class="font-sans font-semibold text-primary-blue group-hover:text-secondary-orange">
                                            General Cargo FTL Freight</div>
                                        <p class="text-sm text-gray-500">The specialist advantage for all your general
                                            cargo.</p>
                                    </div>
                                    <a href="/import-export.html"
                                        class="group flex items-start gap-4 p-3 rounded-lg hover:bg-light-grey transition-colors">
                                        <i class="fas fa-truck fa-fw text-secondary-orange text-xl mt-1"></i>
                                        <div>
                                            <div
                                                class="font-sans font-semibold text-primary-blue group-hover:text-secondary-orange">
                                                Import / Export Goods</div>
                                            <p class="text-sm text-gray-500">Targeted logistics for international trade
                                                flows.</p>
                                        </div>
                                    </a>
                            </div>

                            <!-- Industries Served Links -->
                            <div x-show="activeTab === 'industries'" class="space-y-4">
                                <a href="/mining-industrial-chemical-transport.html"
                                    class="group flex items-start gap-4 p-3 rounded-lg hover:bg-light-grey transition-colors">
                                    <i class="fas fa-industry fa-fw text-secondary-orange text-xl mt-1"></i>
                                    <div>
                                        <div
                                            class="font-sans font-semibold text-primary-blue group-hover:text-secondary-orange">
                                            Mining & Industrial</div>
                                        <p class="text-sm text-gray-500">Logistics for high-value chemicals and
                                            equipment.</p>
                                    </div>
                                </a>
                                <a href="/agricultural-farming-logistics.html"
                                    class="group flex items-start gap-4 p-3 rounded-lg hover:bg-light-grey transition-colors">
                                    <i class="fas fa-leaf fa-fw text-secondary-orange text-xl mt-1"></i>
                                    <div>
                                        <div
                                            class="font-sans font-semibold text-primary-blue group-hover:text-secondary-orange">
                                            Agriculture & Farming</div>
                                        <p class="text-sm text-gray-500">Reliable transport for chemicals and produce.
                                        </p>
                                    </div>
                                </a>
                                <a href="/construction-manufacturing-freight.html"
                                    class="group flex items-start gap-4 p-3 rounded-lg hover:bg-light-grey transition-colors">
                                    <i class="fas fa-hard-hat fa-fw text-secondary-orange text-xl mt-1"></i>
                                    <div>
                                        <div
                                            class="font-sans font-semibold text-primary-blue group-hover:text-secondary-orange">
                                            Construction & Mfg.</div>
                                        <p class="text-sm text-gray-500">On-time freight for materials and project
                                            cargo.</p>
                                    </div>
                                </a>
                            </div>

                            <!-- Destination Countries Links -->
                            <div x-show="activeTab === 'destinations'" class="space-y-4">
                                <a href="/cross-border-freight-zimbabwe.html"
                                    class="group flex items-start gap-4 p-3 rounded-lg hover:bg-light-grey transition-colors">
                                    <i class="fas fa-map-marker-alt fa-fw text-secondary-orange text-xl mt-1"></i>
                                    <div>
                                        <div
                                            class="font-sans font-semibold text-primary-blue group-hover:text-secondary-orange">
                                            Freight to Zimbabwe</div>
                                        <p class="text-sm text-gray-500">Our advantage at the Beitbridge border
                                            crossing.</p>
                                    </div>
                                </a>
                                <a href="/cross-border-freight-zambia.html"
                                    class="group flex items-start gap-4 p-3 rounded-lg hover:bg-light-grey transition-colors">
                                    <i class="fas fa-map-marker-alt fa-fw text-secondary-orange text-xl mt-1"></i>
                                    <div>
                                        <div
                                            class="font-sans font-semibold text-primary-blue group-hover:text-secondary-orange">
                                            Freight to Zambia</div>
                                        <p class="text-sm text-gray-500">Specialist logistics for Lusaka and the
                                            Copperbelt.</p>
                                    </div>
                                </a>
                                <a href="/cross-border-freight-malawi.html"
                                    class="group flex items-start gap-4 p-3 rounded-lg hover:bg-light-grey transition-colors">
                                    <i class="fas fa-map-marker-alt fa-fw text-secondary-orange text-xl mt-1"></i>
                                    <div>
                                        <div
                                            class="font-sans font-semibold text-primary-blue group-hover:text-secondary-orange">
                                            Freight to Malawi</div>
                                        <p class="text-sm text-gray-500">Reliable long-haul via the Tete Corridor.</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </li>
            <!-- END: UPDATED MEGA MENU COMPONENT -->
            <li><a href="index.html#about"
                    class="font-sans font-semibold text-primary-blue hover:text-secondary-orange transition-colors">Our
                    Promise</a></li>
            <li><a href="index.html#faq"
                    class="font-sans font-semibold text-primary-blue hover:text-secondary-orange transition-colors">FAQ</a>
            </li>
            <li><a href="contact.html"
                    class="font-sans font-semibold text-primary-blue hover:text-secondary-orange transition-colors">Contact</a>
            </li>
            <li class="hidden md:block"><button @click="$store.modal.open()"
                    class="bg-secondary-orange text-white font-sans font-bold py-2 px-5 rounded-md hover:bg-orange-600 transition-transform hover:scale-105">Get
                    My Certainty Quote</button></li>
        </ul>
        <div class="lg:hidden">
            <button @click="mobileMenuOpen = !mobileMenuOpen" aria-label="Open main menu"><i
                    class="fas fa-bars text-2xl text-primary-blue"></i></button>
        </div>
    </nav>

    <!-- UPDATED MOBILE MENU -->
    <div x-show="mobileMenuOpen" class="lg:hidden" x-cloak>
        <div class="p-4 space-y-1">
            <p class="px-4 pt-2 text-xs font-bold uppercase text-gray-500">Cargo Types</p>
            <a href="/dedicated-hazchem-freight.html"
                class="block px-4 py-2 font-semibold text-primary-blue rounded-md hover:bg-light-grey">Dedicated Hazchem
                Freight</a>
            <a href="/general-cargo-ftl-freight.html"
                class="block px-4 py-2 font-semibold text-primary-blue rounded-md hover:bg-light-grey">General Cargo FTL
                Freight</a>
            <a href="/import-export.html"
                class="block px-4 py-2 font-semibold text-primary-blue rounded-md hover:bg-light-grey">Import / Export
                Goods</a>

            <p class="px-4 pt-4 text-xs font-bold uppercase text-gray-500">Industries Served</p>
            <a href="/mining-industrial-chemical-transport.html"
                class="block px-4 py-2 font-semibold text-primary-blue rounded-md hover:bg-light-grey">Mining &
                Industrial</a>
            <a href="/agricultural-farming-logistics.html"
                class="block px-4 py-2 font-semibold text-primary-blue rounded-md hover:bg-light-grey">Agriculture &
                Farming</a>
            <a href="/construction-manufacturing-freight.html"
                class="block px-4 py-2 font-semibold text-primary-blue rounded-md hover:bg-light-grey">Construction &
                Mfg.</a>

            <p class="px-4 pt-4 text-xs font-bold uppercase text-gray-500">Destinations</p>
            <a href="/cross-border-freight-zimbabwe.html"
                class="block px-4 py-2 font-semibold text-primary-blue rounded-md hover:bg-light-grey">Freight to
                Zimbabwe</a>
            <a href="/cross-border-freight-zambia.html"
                class="block px-4 py-2 font-semibold text-primary-blue rounded-md hover:bg-light-grey">Freight to
                Zambia</a>
            <a href="/cross-border-freight-malawi.html"
                class="block px-4 py-2 font-semibold text-primary-blue rounded-md hover:bg-light-grey">Freight to
                Malawi</a>

            <div class="pt-4 border-t border-gray-200 mt-2">
                <a href="index.html#about" @click="mobileMenuOpen = false"
                    class="block px-4 py-2 font-semibold text-primary-blue rounded-md hover:bg-light-grey">Our
                    Promise</a>
                <a href="index.html#faq" @click="mobileMenuOpen = false"
                    class="block px-4 py-2 font-semibold text-primary-blue rounded-md hover:bg-light-grey">FAQ</a>
                <a href="contact.html" @click="mobileMenuOpen = false"
                    class="block px-4 py-2 font-semibold text-primary-blue rounded-md hover:bg-light-grey">Contact
                    Us</a>
                <button @click="$store.modal.open(); mobileMenuOpen = false;"
                    class="w-full mt-2 bg-secondary-orange text-white font-sans font-bold py-3 px-5 rounded-md">Get My
                    Certainty Quote</button>
            </div>
        </div>
    </div>
</header>